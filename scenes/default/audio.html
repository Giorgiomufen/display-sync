<!DOCTYPE html>
<html>
<head>
  <style>* { margin: 0; padding: 0; } html, body { width: 100%; height: 100%; background: #000; overflow: hidden; }</style>
</head>
<body>
<canvas id="c"></canvas>
<script>
var c = document.getElementById('c'), ctx = c.getContext('2d');
function resize() {
  c.width = window.innerWidth || document.body.clientWidth;
  c.height = window.innerHeight || document.body.clientHeight;
}
resize();
window.addEventListener('resize', resize);

navigator.mediaDevices.getUserMedia({audio:true}).then(function(s){
  var a = new AudioContext(), n = a.createAnalyser();
  a.createMediaStreamSource(s).connect(n);
  n.fftSize = 256;
  var d = new Uint8Array(n.frequencyBinCount);
  (function draw(){
    n.getByteFrequencyData(d);
    ctx.fillStyle = 'rgba(0,0,0,0.1)';
    ctx.fillRect(0,0,c.width,c.height);
    for(var i=0; i<d.length; i++){
      ctx.fillStyle = 'hsl('+(i*2)+',100%,50%)';
      ctx.fillRect(i*(c.width/d.length), c.height-(d[i]/255)*c.height, c.width/d.length-1, (d[i]/255)*c.height);
    }
    requestAnimationFrame(draw);
  })();
}).catch(function(){
  ctx.fillStyle = '#fff';
  ctx.font = '20px sans-serif';
  ctx.fillText('Microphone access denied', 20, 40);
});
</script>
</body>
</html>
